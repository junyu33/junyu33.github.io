<!DOCTYPE html>
<html lang="zh">

  
    <link rel="alternate" hreflang="en" href="/en/2022/01/18/c2py/">
  

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
  <!-- RSS / Atom -->
  <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>

  
<link rel="stylesheet" href="/css/style.css">

  <title>现充|junyu33</title>
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div class="head-nav">
	<div class="inner">
		<a href="/">
			现充|junyu33
		</a>
		<div class="right">
			
				<a href="/zh">首页</a>
				<a href="/zh/archives">归档</a>
				
					<a href="/zh/categories">Categories</a>
				
				
					<a href="/zh/tags">Tags</a>
				
				<a href="/">English</a>
			
		</div>
	</div>
</div>

  <div class="main">
    <div class="post">
    
      <nav class="lang-switch" role="navigation" aria-label="Language switch">
        
          <a class="lang-pill"
             href="/en/2022/01/18/c2py/"
             hreflang="en">
            <span class="lang-label">English</span>
          </a>
        
      </nav>
    

	<h1>C转python速成</h1>
	<blockquote>
<p>本教程只介绍将python作为一种脚本语言所需要的基本知识点。其目的不是为了机器学习或者数据分析，而是让你写出代码短小、易于维护，而且<s>永远也不会爆ull</s>的<strong>脚本</strong>。</p>
<p>具有良好C基础的读者可以在一个下午掌握这些知识点。</p>
<p>本教程部分引用了<a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/1016959663602400">廖雪峰的博客</a>，且以python3为基础。</p>
</blockquote>
<span id="more"></span>
<h1>与C的主要区别</h1>
<ul>
<li>
<p>变量定义时不用声明类型，但是是强类型语言</p>
</li>
<li>
<p>句尾没有<code>;</code></p>
</li>
<li>
<p>没有<code>&#123;&#125;</code>，而用缩进代替（注意统一使用space或者tab，而且要控制长度统一）</p>
</li>
<li>
<p>if、while语句句尾加<code>:</code></p>
</li>
<li>
<p>条件表达式用<code>and</code>和<code>or</code>，而不是<code>&amp;&amp;</code>或<code>||</code></p>
</li>
<li>
<p>python的整除是<code>//</code>，而不是<code>/</code></p>
</li>
<li>
<p>注释用<code>#</code>，而不是<code>//</code></p>
</li>
<li>
<p><code>'abc'</code>和<code>&quot;abc&quot;</code>表达的意思相同</p>
</li>
</ul>
<h1>I/O</h1>
<ul>
<li>
<p>输入一整行并保存：<code>var = input()</code></p>
</li>
<li>
<p>读入带空格的数据：<code>a, b = map(int, input().split())</code></p>
</li>
<li>
<p>读入提示语：<code>var = input('please type what you want')</code></p>
</li>
<li>
<p>输出一行：<code>print(res)</code></p>
</li>
<li>
<p>输出带空格：<code>print('hello', res1, res2)</code></p>
</li>
<li>
<p>格式化输出：<code>print('my name is %s and I\'m %d year(s) old.' %(name, age))</code>，或者<code>print(f'my name is &#123;name&#125; and I\'m &#123;age&#125; year(s) old.')</code></p>
</li>
<li>
<p>文件I/O：</p>
</li>
</ul>
<pre><code class="language-python">with open('D:/tmp1/file.txt','a') as f:
   f.write('this is a trivial test for file I/O.')
with open('D:/tmp1/file.txt') as f:
   content = f.read()
print(content) #然而文件本身有中文时乱码了，「你好」变成了「浣犲ソ」，解决方法在后文。
f.close()
</code></pre>
<h1>Data type &amp; transfer</h1>
<p>变量从创建（赋值）好后，它的类型便确定了。可以通过<code>type(var)</code>来查看其类型。</p>
<ul>
<li>
<p>整型(int)：<code>567</code>，<code>0xc0ffee</code>，<code>2**100+1</code>，<code>998244353 // 114514</code>等。</p>
</li>
<li>
<p>浮点(float)：<code>3.14</code>，<code>1.6e-19</code>，<code>0.1 + 0.2</code>，<code>math.sqrt(1919810)</code>等。</p>
</li>
<li>
<p>字符串(str)：<code>'I\'m \&quot;OK\&quot;!'</code>，<code>'\\\t\\'</code>或者</p>
</li>
</ul>
<pre><code class="language-python">'''hello,
world!''' #字符串可以换行书写
</code></pre>
<ul>
<li>
<p>字节型(bytes)：如<code>b'A'</code>，<code>b'1qaz2wsx'</code>。它们不能和int或str做运算。</p>
</li>
<li>
<p>布尔值：<code>True</code>和<code>False</code>，等同于1和0。它们可以进行算术和逻辑运算，但不能对这两者重新赋值。</p>
</li>
<li>
<p>空值：<code>None</code></p>
</li>
<li>
<p>将字符串转整型：<code>int(input())</code></p>
</li>
<li>
<p>将整型转为浮点：<code>float(19260817)</code></p>
</li>
<li>
<p>16进制转10进制：<code>int('0xdeadbeef',16)</code>或<code>int('0ff1ce'，16)</code></p>
</li>
<li>
<p>10进制转2进制：<code>bin(10)</code></p>
</li>
</ul>
<h1>Encoding</h1>
<p>（我终于能处理带中文字符的文件了！）</p>
<ul>
<li>几种编码的主要区别（Unicode只用于内存显示，不用于数据储存）：</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">字符</th>
<th style="text-align:center">ASCII</th>
<th style="text-align:center">Unicode</th>
<th style="text-align:center">UTF-8</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">A</td>
<td style="text-align:center">01000001</td>
<td style="text-align:center">00000000 01000001</td>
<td style="text-align:center">01000001</td>
</tr>
<tr>
<td style="text-align:center">中</td>
<td style="text-align:center">×</td>
<td style="text-align:center">01001110 00101101</td>
<td style="text-align:center">11100100 10111000 10101101</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>int -&gt; chr用<code>chr()</code>，chr -&gt; int用<code>ord()</code></p>
</li>
<li>
<p>将str转成ascii或utf-8需使用<code>'xxx'.encode('ascii')</code>或<code>'xxx'.encode('utf-8')</code></p>
</li>
<li>
<p>将字节码转回str则使用decode：</p>
</li>
</ul>
<pre><code class="language-python">&gt;&gt;&gt; b'ABC'.decode('ascii')
'ABC'
&gt;&gt;&gt; b'\xe4\xb8\xad\xe6\x96\x87'.decode('utf-8')
'中文'
</code></pre>
<p>回到之前的文件I/O，我们只需要在第二次打开文件时加上一项<code>encoding = 'utf-8'</code>即可。</p>
<h1>Basic databases</h1>
<p>在python，数据结构被作为<em>对象</em>来处理，它们本身已经内置了一些<em>方法</em>，这是与面向过程的C的一个重要不同点。</p>
<h2 id="list——">list——[]</h2>
<ul>
<li>
<p>创建一个list：<code>subjects = ['calculus', 'programming', 'politics']</code></p>
</li>
<li>
<p>查询最后一项：<code>subjects[2]</code>或者<code>subjects[-1]</code></p>
</li>
<li>
<p>对第二项重新赋值：<code>subjects[1] = PE</code>或者 <code>subjects[-2] = PE</code></p>
</li>
<li>
<p>在尾部插入：<code>subjects.append('introduction_to_computer_system')</code></p>
</li>
<li>
<p>在指定位置（下标为2处）插入：<code>subjects.append(2, 'databases')</code></p>
</li>
<li>
<p>在尾部删除：<code>subjects.pop()</code></p>
</li>
<li>
<p>删除下标为3的元素：<code>subjects.pop(3)</code></p>
</li>
<li>
<p>对元素排序（list内元素类型必须相同）：<code>subjects.sort()</code></p>
</li>
</ul>
<h2 id="tuple——">tuple——()</h2>
<ul>
<li>创建一个tuple：<code>subjects = ('calculus', 'programming', 'politics')</code></li>
</ul>
<p>tuple<strong>一旦创建，就不能修改</strong></p>
<h2 id="dict——">dict——{}</h2>
<p>（dict类似于c++中的<code>map</code>。我本来以为dict也是靠rb-tree实现的，结果一个错误告诉我它是靠hash实现的，因此dict中的元素必须是str、tuple等<strong>不可变对象</strong>，而不能插入list）</p>
<ul>
<li>
<p>创建一个dict：<code>score = &#123;'calculus':96, 'programming':92, 'politics':86&#125;</code></p>
</li>
<li>
<p>插入元素：<code>score['PE']=80</code></p>
</li>
<li>
<p>删除元素：<code>score.pop('calculus')</code></p>
</li>
</ul>
<h2 id="set——set-list">set——set(list)</h2>
<p>顾名思义，set中不会含有重复的元素。</p>
<ul>
<li>
<p>创建一个set：<code>academic = set(['programming', 'databases', 'assembly'])</code></p>
</li>
<li>
<p>插入元素：<code>academic.add('networking')</code></p>
</li>
<li>
<p>删除元素：<code>academic.remove('programming')</code></p>
</li>
<li>
<p>交集并集：</p>
</li>
</ul>
<pre><code class="language-python">&gt;&gt;&gt; s1 = set([1, 2, 3])
&gt;&gt;&gt; s2 = set([2, 3, 4])
&gt;&gt;&gt; s1 &amp; s2
&#123;2, 3&#125;
&gt;&gt;&gt; s1 | s2
&#123;1, 2, 3, 4&#125;
</code></pre>
<h1>Condition and loop</h1>
<ul>
<li>再强调一遍：组合条件用<code>and</code>和<code>or</code>，而不是<code>&amp;&amp;</code>或<code>||</code>！</li>
</ul>
<p>条件语句剩下的注意事项看以下例子：</p>
<pre><code class="language-python">age = int(input())
if age &gt;= 6:
    print('teenager')
elif age &gt;= 18:
    print('adult')
else:
    print('kid')
</code></pre>
<ul>
<li>for循环可以遍历list、tuple和str中的每一个元素：</li>
</ul>
<pre><code class="language-python">subjects = ['calculus', 'programming', 'politics']
for i in subjects:
    print(i)
</code></pre>
<ul>
<li>也可以遍历整数序列（求0~100的整数和）：</li>
</ul>
<pre><code class="language-python">sum = 0
for x in range(101):
    sum = sum + x
print(sum)
</code></pre>
<ul>
<li>break和continue依然有效（求0~50的偶数和）：</li>
</ul>
<pre><code class="language-python">sum = 0
for x in range(101):
    if x &gt; 50:
        break
    elif x &amp; 1:
        continue
    sum = sum + x
print(sum)
</code></pre>
<ul>
<li>遍历list、tuple、str中元素更高效的方式是<em>切片</em>，切片中的三个参数分别表示初值、终值和步长</li>
</ul>
<pre><code class="language-python">&gt;&gt;&gt; L = list(range(100))
&gt;&gt;&gt; L[:10]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
&gt;&gt;&gt; L[-10:]
[90, 91, 92, 93, 94, 95, 96, 97, 98, 99]
&gt;&gt;&gt; L[10:20]
[10, 11, 12, 13, 14, 15, 16, 17, 18, 19]
&gt;&gt;&gt; L[:10:2]
[0, 2, 4, 6, 8]
&gt;&gt;&gt; L[::5]
[0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95]
&gt;&gt;&gt; L[:]
[0, 1, 2, 3, ..., 99]
&gt;&gt;&gt; L[::-1]
[99, 98, 97, 96, ..., 0]
</code></pre>
<h1>Function</h1>
<p>一个简单的阶乘函数：</p>
<pre><code class="language-python">def fact(n):
    if n==1:
        return 1
    return n * fact(n - 1)
</code></pre>
<ul>
<li>函数可以返回多个值——其实是一个tuple</li>
</ul>
<pre><code class="language-python">def rot90(x, y):
    tmp = x
    x = -y
    y = tmp
    return x, y
</code></pre>
<h2 id="位置参数">位置参数</h2>
<p>跟你C语言的参数是一个意思。</p>
<h2 id="默认参数">默认参数</h2>
<p>比如之前<code>open</code>函数的帮助文档是这样写的：</p>
<pre><code class="language-python">&gt;&gt;&gt; help(open)
Help on built-in function open in module io:

open(file, mode='r', buffering=-1, encoding=None, errors=None, newline=None, closefd=True, opener=None)
    Open file and return a stream.  Raise OSError upon failure.

    file is either a text or byte string giving the name (and the path
    if the file isn't in the current working directory) of the file to
    be opened or an integer file descriptor of the file to be
    wrapped. (If a file descriptor is given, it is closed when the
-- More  --
</code></pre>
<ul>
<li>除了第一项文件路径之外，剩下的都是默认参数。由于我之前没有填写<code>encoding</code>的参数，它默认是<code>None</code>，从而导致读取的文件乱码。</li>
</ul>
<blockquote>
<p>注意：默认参数需要指向不可变对象！否则每一次函数运行后，得到的结果都可能不同。</p>
</blockquote>
<h1>Summary</h1>
<blockquote>
<p>The best way to learn a language is to use it.</p>
</blockquote>
<p>快去刷题！</p>

</div>


  </div>
</body>
</html>

