<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
  <!-- RSS / Atom -->
  <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>

  
<link rel="stylesheet" href="/css/style.css">

  <title>现充|junyu33</title>
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div class="head-nav">
	<div class="inner">
		<a href="/">
			现充|junyu33
		</a>
		<div class="right">
			
				<a href="/zh">首页</a>
				<a href="/zh/archives">归档</a>
				
					<a href="/zh/categories">Categories</a>
				
				
					<a href="/zh/tags">Tags</a>
				
				<a href="/">English</a>
			
		</div>
	</div>
</div>

  <div class="main">
    <div class="post">
    

	<h1>二八——重温《小羊肖恩之绵羊回家2》</h1>
	<p>追寻童年那三只小羊的回忆——那可是十年前的事情啊。</p>
<p><s>不要问我是不是因为《羊了个羊》火了才想起来这个游戏的。</s></p>
<img src = 'https://img.junyu33.me/blog/home_sheep_home/congrats.png'>
<span id="more"></span>
<h1>三星通关+全物品收集</h1>
<p>这个游戏如果想把所有物品（袜子、蛋糕、游戏机）收集齐的话，有一点思维难度。并且通常情况下，你不能一边冲三星，一边拿到所有物品。（手速大佬与游戏开发者请忽略这段话，<s>毕竟游戏开发者的记录无人能敌</s>）</p>
<p>但是游戏中如果你收集了物品的话，重玩就不需要再收集了。所以最有效率的玩法是第一遍先慢慢玩，理清通关的思路同时，找到所有的物品，然后第二遍速通（我平均也要三遍左右才能三星）。</p>
<p>什么，你过不了关？那你还是洗洗睡吧。毕竟后面的操作都很硬核。</p>
<h1>刷全成就</h1>
<p>如果说单纯通关游戏的难度是1，那么三星通关+全物品收集的难度是3，刷全成就的难度可能就是10了。</p>
<h2 id="60-的低难度成就">60%的低难度成就</h2>
<p>做到三星通关+全物品收集的话，这一部分的成就应该都有了，下面来说一下那些比较tricky的成就。</p>
<h2 id="30-的中难度成就">30%的中难度成就</h2>
<p>主要是涉及到关卡的一些骚操作，举几个有代表性的例子。</p>
<h3 id="降落伞在哪（只使用两个降落伞）">降落伞在哪（只使用两个降落伞）</h3>
<img src = 'https://img.junyu33.me/blog/home_sheep_home/image-20221007234536542.png'>
<blockquote>
<p>体积从大到小分别为雪莉(Shirley)、肖恩(Shaun)与蒂米(Timmy).</p>
</blockquote>
<p>Shaun跳到右边的石块拿降落伞，Shirley拿到上方的降落伞后一跃而下。由于Shirley上升速度较慢，Timmy有足够的时间跳到Shirley的背上，与Shirley一起上去。</p>
<h3 id="高速特写（让测速相机拍到他们仨）">高速特写（让测速相机拍到他们仨）</h3>
<img src = 'https://img.junyu33.me/blog/home_sheep_home/image-20221007235452851.png'>
<p>Shaun直接在卡车顶上跨栏即可。Timmy踩在Shirley背上，跳的时候靠前一些（想象测速相机从下往上拍）。Shirley踩在Timmy背上，跳一下就行。</p>
<blockquote>
<p>完成此成就不需要通关，建议拿了成就赶快退出关卡。<s>难道你不心疼Shirley做为挡箭牌吗</s></p>
</blockquote>
<h3 id="烤羊（让Shaun跳到火箭尾部）">烤羊（让Shaun跳到火箭尾部）</h3>
<img src = 'https://img.junyu33.me/blog/home_sheep_home/rocket.png'>
<p>（理论上能让他们仨跳得最高的方法）</p>
<p>Shirley踩在Timmy上面，在Shirley跳的一瞬间，角色切换成Shaun然后纵身一跃上火箭。</p>
<p>这个有点考手速，但不是太难。<s>但是如果把Shaun起跳后，两只羊都在空中的那一瞬间截下来就有点难顶了</s></p>
<blockquote>
<p>我小时候可能做到这一步就打不过其它的成就了。</p>
</blockquote>
<h2 id="10-的高难度成就">10%的高难度成就</h2>
<p>我用三天打完了这个游戏，剩下的这四个成就就折磨了我两天。</p>
<h3 id="废物利用（在太空漫步关卡14中只使用一次传送）">废物利用（在太空漫步关卡14中只使用一次传送）</h3>
<img src = 'https://img.junyu33.me/blog/home_sheep_home/image-20221008001851596.png'>
<p>我一开始心想，这个成就难道不简单？让Shirley和Shaun一起跳到终点不就完事了？事实上确实只需要一次传送，让Timmy和右边那个小方块交换就可以。但是，我通关后，成就并没有解锁。即使我又重复了两次，但依然没有奏效。</p>
<p>于是我开始怀疑自己对成就的理解是否存在偏差，我打开了<a target="_blank" rel="noopener" href="https://rawg.io/games/home-sheep-home-2/achievements">这个网站</a>，发现它对这个成就的叙述如下：</p>
<img src = 'https://img.junyu33.me/blog/home_sheep_home/image-20221008002708613.png'>
<p>它的意思是「只切换一次羊的选择」，而不是「只使用一次传送」。这翻译得也太不负责了吧@-}(|&amp;;<em>;-%!$+:</em>.{~:</p>
<p>所以正确的做法是先让Shuan跳着Shirley先终点（Shaun推Shirley有点费劲，但还是能推动的），与Timmy交换。然后再跳着Shirley到终点，把小方块推到传送门。最后切换到Shirley，与小方块交换即可。</p>
<h3 id="极限运动（打破一次开发商时间）">极限运动（打破一次开发商时间）</h3>
<p>这个开发商时间是真的离谱，我感觉我的手速足够快了，大多数关卡通关时间却还是比开发商慢30%左右。</p>
<p>在经过多次尝试仍然无果的情况下，我打开了B站。结果因为这个游戏过于冷门，连攻略都找不到几个。就那几个仅有的攻略都还停留在三星通关+全物品收集的层面。</p>
<p>我的目光转向了YouTube，结果有所发现：<a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=hSL0vngdDBc">https://www.youtube.com/watch?v=hSL0vngdDBc</a></p>
<blockquote>
<p>视频中开发商时间是10s，我这儿是9s，好家伙随着时间推移越来越难是吧——</p>
</blockquote>
<p>我开始模仿视频的做法，由于我的操作过于拙劣，我开启了变速齿轮来增加我的反应时间。在经过二十多次的尝试过后，我终于以8.4s的时间打破了开发商的记录。</p>
<img src = 'https://img.junyu33.me/blog/home_sheep_home/image-20221008004852848.png'>
<h3 id="得分递交（递交得分到官方排行榜）">得分递交（递交得分到官方排行榜）</h3>
<p>这是个盗版单机游戏，因此这个成就理论上是无法完成的（steam版删除了这个成就，但是它的另外一个成就也有bug无法完成）。</p>
<p>所以我们要使用一些非常规方法达成这个成就。</p>
<p>既然是单机游戏，那么游戏数据应该保存在电脑的某个位置（具体而言，是用户目录AppData下的Roaming文件夹），everything扫一下就出来了。</p>
<p>我们只需要关注<code>savedata.txt</code>与<code>savedata.old</code>两个文件。按照我的经验，游戏启动应该是读取<code>savedata.old</code>，然后把修改写入<code>savedata.txt</code>。最后游戏关闭时再把<code>savedata.txt</code>copy到<code>savedata.old</code>.</p>
<p>这两个文件实质上是json文件，具体有关成就的部分如下：</p>
<pre><code class="language-json">    &quot;achievements&quot;: [
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;miscRoastLamb&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;miscBringLuggage&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;miscCameraDestroy&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;miscCameraJump&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;miscUndamagedChimneys&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;miscTwoParachutes&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressAllEpisodes&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;miscNoExplosives&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;miscSaveExplosives&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;miscTwoTeleports&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;miscSingleSwap&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;miscSurfTheVan&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;miscUnchangedTime&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;miscSheepJuggling&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;miscNoFootball&quot;&#125;,
        &#123;&quot;got&quot;: false, &quot;id&quot;: &quot;miscCrossPromo&quot;&#125;,
        &#123;&quot;got&quot;: false, &quot;id&quot;: &quot;miscSubmitScore&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;stars1&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;collect12Socks&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;stars5&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;collect24Socks&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;stars30&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;starsAll&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;starsDev&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;collect2Socks&quot;&#125;,
        &#123;&quot;got&quot;: false, &quot;id&quot;: &quot;collect12SocksWeb&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressUnderground_1&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;collect50Socks&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressUnderground_5&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;collect75Socks&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressUnderground_10&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;collectAllSocks&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressUnderground_15&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;collect1Cake&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressLondon_1&quot;&#125;,
        &#123;&quot;got&quot;: false, &quot;id&quot;: &quot;collect1Secret&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressLondon_5&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;collect1Joystick&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressLondon_10&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;collectAllCakes&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressLondon_15&quot;&#125;,
        &#123;&quot;got&quot;: false, &quot;id&quot;: &quot;collectAllSecrets&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressSpace_1&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;collectAllJoysticks&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressSpace_5&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;collectAllCollectables&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressSpace_10&quot;&#125;,
        &#123;&quot;got&quot;: false, &quot;id&quot;: &quot;miscOneHundredPercent&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressSpace_15&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressTraining1&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressTraining2&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressTraining3&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressBonus1&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressBonus5&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressBonus10&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;progressBonusAll&quot;&#125;,
        &#123;&quot;got&quot;: true, &quot;id&quot;: &quot;miscCredits&quot;&#125;
    ],
</code></pre>
<p>我尝试把<code>miscSubmitScore</code>从<code>false</code>改成<code>true</code>。结果重启游戏一看，喔嚯，我之前的存档全没了。幸好notepad++在文件被修改时会有用户确认提示，不然我两天的心血就白费咯。</p>
<p>为什么会有这种情况发生呢？我询问mxy后得知json中有一个<code>val</code>对象：</p>
<pre><code class="language-json">    &quot;val&quot;: &quot;76b44f37329e3de81ce86f2874a7ea1d&quot;,
</code></pre>
<p>长度32位，只有0~9，a~f这些字符。盲猜程序可能把用户的一些信息做了个MD5哈希存在<code>val</code>里，启动的时候比对一下，如果不相同就删除所有存档重开一波。</p>
<p>怎么来验证呢？那自然只有去逆向程序了呗。</p>
<p>程序的主体是个swf文件，所以这是一个flash游戏，ffdec可以用来反汇编flash。打开软件之后搜索MD5，选择Levels这个script，定位到生成<code>val</code>的这个函数：</p>
<img src = 'https://img.junyu33.me/blog/home_sheep_home/image-20221008011428097.png'>
<pre><code class="language-javascript">      public static function getValidationCode() : String
      &#123;
         var _loc1_:String = &quot;&quot;;
         var _loc2_:int = 0;
         while(_loc2_ &lt; defs.length)
         &#123;
            if(defs[_loc2_].available)
            &#123;
               _loc1_ = _loc1_ + defs[_loc2_].dev;
               _loc1_ = _loc1_ + defs[_loc2_].complete;
               _loc1_ = _loc1_ + defs[_loc2_].autoReduce;
               _loc1_ = _loc1_ + defs[_loc2_].best;
               _loc1_ = _loc1_ + defs[_loc2_].stars;
               _loc1_ = _loc1_ + defs[_loc2_].episode;
               _loc1_ = _loc1_ + defs[_loc2_].levelNum;
               _loc1_ = _loc1_ + defs[_loc2_].attempts;
               _loc1_ = _loc1_ + defs[_loc2_].title;
               _loc1_ = _loc1_ + defs[_loc2_].par;
               _loc1_ = _loc1_ + defs[_loc2_].levelTotal;
               _loc1_ = _loc1_ + defs[_loc2_].locked;
               _loc1_ = _loc1_ + defs[_loc2_].brisk;
               _loc1_ = _loc1_ + defs[_loc2_].isBonus;
            &#125;
            _loc2_++;
         &#125;
         _loc1_ = _loc1_ + Achievements.inst.totalGot();
         _loc1_ = _loc1_ + Achievements.inst.totalAvailable();
         _loc1_ = _loc1_ + Collectables.inst.totalGot();
         _loc1_ = _loc1_ + Collectables.inst.totalAvailable();
         return MD5.hash(salt + _loc1_ + salt);
      &#125;
</code></pre>
<p>程序的逻辑很清晰，把<code>defs</code>里面的所有关卡按照代码给的顺序拼接起来，再拼接获得成就的个数、总成就个数、获得物品个数、总物品个数。然后把得到的字符串前后加盐，MD5一下即可。</p>
<p>其中盐在代码里面直接给了，关卡的数据在json中都有，因此我写出了以下python脚本：</p>
<pre><code class="language-python">import ijson
import hashlib
file_name = 'D:/tmp1/savedata.txt'
with open(file_name, 'r') as f:
   obj = list(ijson.items(f, 'defs'))
_loc1_ = ''
flag = 0
salt = 'q2vakri78abq23i8rcynaql2irnvolqy8ito'
for item in obj:
   for level in item:
      if level['available'] != True:
         continue
      _loc1_ = _loc1_ + str(level['dev'])
      _loc1_ = _loc1_ + str(level['complete']).lower()
      _loc1_ = _loc1_ + str(level['autoReduce']).lower()
      _loc1_ = _loc1_ + str(level['best'])
      _loc1_ = _loc1_ + str(level['stars'])
      _loc1_ = _loc1_ + str(level['episode'])
      _loc1_ = _loc1_ + str(level['levelNum'])
      _loc1_ = _loc1_ + str(level['attempts'])
      _loc1_ = _loc1_ + str(level['title'])
      _loc1_ = _loc1_ + str(level['par'])
      _loc1_ = _loc1_ + str(level['levelTotal'])
      _loc1_ = _loc1_ + str(level['locked']).lower()
      _loc1_ = _loc1_ + str(level['brisk'])
      _loc1_ = _loc1_ + str(level['isBonus']).lower()
      # 355truefalse5453Underground111Level01185415false927false
      if flag != 2:
         print(level)
         print(_loc1_)
         flag += 1

with open(file_name, 'r') as f:
   obj = list(ijson.items(f, 'achievements'))

# print(obj)
for item in obj:
   achieve_cnt = 0
   achieve_total = 0
   for achieve in item:
      if achieve['got'] == True:
         achieve_cnt += 1
      achieve_total += 1
   print('achieve_cnt: ' + str(achieve_cnt))
   print('achieve_total: ' + str(achieve_total))


with open(file_name, 'r') as f:
   obj = list(ijson.items(f, 'collectables'))

for item in obj:
   collection_cnt = 0
   collection_total = 0
   for collection in item:
      if collection['got'] == True:
         collection_cnt += 1
      collection_total += 1
   print('collection_cnt: ' + str(collection_cnt))
   print('collection_total: ' + str(collection_total))

_loc1_ += str(achieve_cnt)
_loc1_ += str(achieve_total)
_loc1_ += str(collection_cnt)
_loc1_ += str(collection_total)

# print(_loc1_)
val = hashlib.md5((salt+_loc1_+salt).encode('utf-8')).hexdigest()
print(val)
</code></pre>
<p><s>可惜的是，这个代码算出来的MD5值与<code>val</code>并不相同，原因未知。</s></p>
<p>Updated on 13/6/2025：</p>
<p>算出来哈希值不一致的原因是 <code>achieve_total</code> 与 <code>collection_total</code> 的值并非 <code>achievements</code> 与 <code>collectables</code> 字段的长度。因为有些成就与收集的物品最终并没有纳入游戏本体。为了拿到这两个的正确值，我们只需要用一个正确的存档，拿这两个数值的组合进行哈希碰撞即可，例如：</p>
<pre><code class="language-python"># 统计已获得的成就总数和可用成就总数
achievements_got = sum(1 for ach in json_data[&quot;achievements&quot;] if ach[&quot;got&quot;])
achievements_available = len(json_data[&quot;achievements&quot;])

# 统计已获得的收集品总数和可用收集品总数
collectables_got = sum(1 for col in json_data[&quot;collectables&quot;] if col[&quot;got&quot;])
collectables_available = len(json_data[&quot;collectables&quot;])

# 追加成就和收集品的计数
for i in range(200):
   for j in range(200):
      tmp = result
      tmp += str(achievements_got)
      tmp += str(i)
      tmp += str(collectables_got)
      tmp += str(j)
      
      # 使用盐值计算 MD5 哈希
      final_string = salt + tmp + salt
      if hashlib.md5(final_string.encode('utf-8')).hexdigest() == json_data[&quot;val&quot;]:
            print(i, j)
            return
</code></pre>
<p>这里得出 <code>achieve_total</code>（也就是碰撞代码中的 <code>achievements_got</code>）值为 53，而 <code>collection_total</code>（也就是修改代码中的 <code>collectables_available</code>）值为 121。因此我们将源代码的最后四行：</p>
<pre><code class="language-python">_loc1_ += str(achieve_cnt)
_loc1_ += str(achieve_total)
_loc1_ += str(collection_cnt)
_loc1_ += str(collection_total)
</code></pre>
<p>替换为</p>
<pre><code class="language-python">_loc1_ += 53
_loc1_ += 53
_loc1_ += str(collection_cnt)
_loc1_ += 121
</code></pre>
<p>即可。</p>
<hr>
<p>于是我退而求其次，打算直接修改代码来绕过检测。</p>
<pre><code class="language-javascript">      public static function fromString(param1:String) : void
      &#123;
         var param1:String = param1;
         var obj:Object = null;
         var str:String = param1;
         try
         &#123;
            obj = JSONPretty.decode(str);
            if(obj.ver != ver)
            &#123;
               initialiseSO();
               return;
            &#125;
            defs = obj.defs.slice();
            Achievements.inst.loadFromArray(obj.achievements);
            Collectables.inst.loadFromArray(obj.collectables);
            Hacks.tried = obj.hacksTried.slice();
            DevComments.seenComments = obj.seenComments.slice();
         &#125;
         catch(e:Error)
         &#123;
            DevPanel.log(&quot;Error decoding saved data: &quot; + e.message);
            initialiseSO();
            return;
         &#125;
         checkValid(obj.val);
      &#125;
</code></pre>
<p>在github上面找个版本30的<code>playerglobal.swc</code>来启用编辑源代码功能，把倒数第二行注释掉即可。</p>
<p>注意，一定要记得左上角的保存，看到swf的修改时间变了再关ffdec。</p>
<p>然后再改之前的<code>savedata.txt</code>和<code>savedata.old</code>（我是都改得一样）。</p>
<p>没想到——这就成功了！</p>
<h3 id="休息时间（完成所有成就）">休息时间（完成所有成就）</h3>
<p>很遗憾，之前暴力修改了得分递交并没有让这个成就自动解锁。</p>
<p>于是如法炮制，将json中的<code>miscOneHundredPercent</code>的值改为<code>true</code>即可。</p>

</div>


  </div>
</body>
</html>

